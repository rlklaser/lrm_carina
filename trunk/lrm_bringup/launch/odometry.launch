<launch>

	<param
		name="/use_sim_time"
		value="true" />

	<include file="$(find lrm_bringup)/launch/odometry_wheel.launch" />
	<include file="$(find lrm_bringup)/launch/odometry_gps.launch" />

	<node
		pkg="tf"
		type="static_transform_publisher"
		name="ekf_odom_broadcaster"
		args="0 0 0 0 0 0 map odom_combined 30"
		output="screen" />

	<node
		pkg="robot_pose_ekf"
		type="robot_pose_ekf"
		name="robot_pose_ekf"
		output="screen"
		respawn="true"
	>
		<param
			name="output_frame"
			value="/odom_combined" />
		<param
			name="freq"
			value="30.0" />
		<param
			name="sensor_timeout"
			value="1.0" />
		<param
			name="odom_used"
			value="true" />
		<param
			name="imu_used"
			value="true" />
		<param
			name="vo_used"
			value="true" />
		<param
			name="debug"
			value="false" />
		<param
			name="self_diagnose"
			value="false" />

		<remap
			from="imu_data"
			to="/lse_xsens_mti/xsens/imu/data" />
		<remap
			from="vo"
			to="/gpsodom" />
		<remap
			from="odom"
			to="/wheel_odometry/odom" />
	</node>

	<node
		name="reset_pose"
		pkg="lrm_odometry"
		type="pose_reset_node"
		output="screen"
		respawn="true"
	>
		<param
			name="timeout"
			value="10.0" />

		<remap
			from="set_pose"
			to="/wheel_odometry/set_pose" />

		<remap
			from="pose2d"
			to="/odom_combined" />

	</node>

</launch>